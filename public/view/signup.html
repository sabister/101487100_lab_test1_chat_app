<!DOCTYPE html>
<html>
<head>
    <title>Signup</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5 "style="background-color: bisque;">

<h2 style="text-align: center;">Signup</h2>

<form id="signupForm" style="background-color: rgb(240, 202, 145);">
    <input class="form-control mb-2" type="text" id="username" placeholder="Username" required>
    <input class="form-control mb-2" type="text" id="firstname" placeholder="First Name" required>
    <input class="form-control mb-2" type="text" id="lastname" placeholder="Last Name" required>
    <input class="form-control mb-2" type="password" id="password" placeholder="Password" required>
    <button class="btn btn-primary form-control" style="background-color: rgb(151, 79, 152);">Signup</button>
</form>

<p class="mt-3">
    Already have an account? <a href="login.html">Login</a>
</p>

<script>
document.getElementById("signupForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const response = await fetch("/signup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            username: username.value,
            firstname: firstname.value,
            lastname: lastname.value,
            password: password.value
        })
    });

    const data = await response.json();
    alert(data.message);

    if(response.status === 201){
        window.location.href = "login.html";
    }
});
</script>

</body>
</html>
