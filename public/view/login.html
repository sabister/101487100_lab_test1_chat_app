<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5" style="background-color: bisque;">

<h2 style="text-align: center;">Login</h2>

<form id="loginForm" style="background-color: rgb(240, 202, 145);">
    <input class="form-control mb-2" type="text" id="username" placeholder="Username" required>
    <input class="form-control mb-2" type="password" id="password" placeholder="Password" required>
    <button class="btn btn-success form-control" style="background-color: rgb(151, 79, 152);">Login</button>
</form>

<p class="mt-3">
    Don't have account? <a href="signup.html">Signup</a>
</p>

<script>
document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const response = await fetch("/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            username: username.value,
            password: password.value
        })
    });

    const data = await response.json();

    if(response.status === 200){
        localStorage.setItem("username", data.username);
        window.location.href = "chat.html";
    } else {
        alert(data.message);
    }
});
</script>

</body>
</html>
